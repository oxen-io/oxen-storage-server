From: Jason Rhinelander <jason@imaginary.ca>
Date: Tue, 29 Sep 2020 14:00:02 -0300
Subject: Enable LTO

---
 CMakeLists.txt            | 4 +++-
 common/CMakeLists.txt     | 2 +-
 crypto/CMakeLists.txt     | 2 +-
 httpserver/CMakeLists.txt | 2 +-
 storage/CMakeLists.txt    | 2 +-
 unit_test/CMakeLists.txt  | 2 +-
 6 files changed, 8 insertions(+), 6 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index 3a37a77..001afa1 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required(VERSION 3.1)
+cmake_minimum_required(VERSION 3.10)
 
 function(loki_add_subdirectory SRC)
     get_filename_component(target ${SRC} NAME)
@@ -8,6 +8,8 @@ function(loki_add_subdirectory SRC)
     add_subdirectory(${SRC} ${ARGN})
 endfunction()
 
+set(CMAKE_INTERPROCEDURAL_OPTIMIZATION ON)
+
 project(storage_server)
 
 option(INTEGRATION_TEST "build for integration test" OFF)
diff --git a/common/CMakeLists.txt b/common/CMakeLists.txt
index e6b4373..8161bad 100644
--- a/common/CMakeLists.txt
+++ b/common/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required(VERSION 3.1)
+cmake_minimum_required(VERSION 3.10)
 
 add_definitions(-DSPDLOG_COMPILED_LIB)
 
diff --git a/crypto/CMakeLists.txt b/crypto/CMakeLists.txt
index c05baec..ee4a73a 100644
--- a/crypto/CMakeLists.txt
+++ b/crypto/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required(VERSION 3.1)
+cmake_minimum_required(VERSION 3.10)
 
 project(crypto)
 
diff --git a/httpserver/CMakeLists.txt b/httpserver/CMakeLists.txt
index 3a93b1c..2a869fd 100644
--- a/httpserver/CMakeLists.txt
+++ b/httpserver/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required(VERSION 3.1)
+cmake_minimum_required(VERSION 3.10)
 
 add_definitions(-DDISABLE_ENCRYPTION)
 
diff --git a/storage/CMakeLists.txt b/storage/CMakeLists.txt
index df2a9e6..d8c685e 100644
--- a/storage/CMakeLists.txt
+++ b/storage/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required(VERSION 3.1)
+cmake_minimum_required(VERSION 3.10)
 
 add_library(storage STATIC
     src/Database.cpp
diff --git a/unit_test/CMakeLists.txt b/unit_test/CMakeLists.txt
index 7132307..0884dd3 100644
--- a/unit_test/CMakeLists.txt
+++ b/unit_test/CMakeLists.txt
@@ -1,4 +1,4 @@
-cmake_minimum_required (VERSION 3.1)
+cmake_minimum_required (VERSION 3.10)
 
 add_executable (Test
     main.cpp
